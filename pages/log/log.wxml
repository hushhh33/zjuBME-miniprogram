<view class="container">
  <!-- 标签栏 -->
  <view class="tabs">
    <view 
      class="tab {{currentTab === 'pain' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="pain"
    >
      疼痛
    </view>
    <view 
      class="tab {{currentTab === 'range' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="range"
    >
      活动度
    </view>
    <view 
      class="tab {{currentTab === 'muscle' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="muscle"
    >
      肌力
    </view>
    <view 
      class="tab {{currentTab === 'swelling' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="swelling"
    >
      肿胀
    </view>
    <view 
      class="tab {{currentTab === 'function' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="function"
    >
      功能
    </view>
    <view 
      class="tab {{currentTab === 'wound' ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="wound"
    >
      伤口
    </view>
  </view>

  <!-- 疼痛记录 -->
  <view wx:if="{{currentTab === 'pain'}}" class="record-container">
    <view class="form-item">
      <text class="label">静息痛：</text>
      <slider 
        min="0" 
        max="10" 
        value="{{restPain}}" 
        bindchange="onRestPainChange" 
        show-value
      />
    </view>
    
    <view class="form-item">
      <text class="label">活动痛：</text>
      <slider 
        min="0" 
        max="10" 
        value="{{activityPain}}" 
        bindchange="onActivityPainChange" 
        show-value
      />
    </view>
    
    <view class="form-item">
      <text class="label">夜间痛：</text>
      <slider 
        min="0" 
        max="10" 
        value="{{nightPain}}" 
        bindchange="onNightPainChange" 
        show-value
      />
    </view>
    
    <view class="form-item">
      <text class="label">止痛药物：</text>
      <input 
        type="text" 
        placeholder="药物名称" 
        value="{{medicineName}}"
        bindinput="onMedicineNameChange"
      />
    </view>
    
    <view class="form-item">
      <text class="label">药物剂量：</text>
      <input 
        type="text" 
        placeholder="如：1片" 
        value="{{medicineDose}}"
        bindinput="onMedicineDoseChange"
      />
    </view>
    
    <view class="form-item">
      <text class="label">服药时间：</text>
      <input 
        type="text" 
        placeholder="如：早上8点" 
        value="{{medicineTime}}"
        bindinput="onMedicineTimeChange"
      />
    </view>
    
    <view class="form-item">
      <text class="label">疼痛描述：</text>
      <textarea 
        placeholder="描述疼痛的性质、特点等" 
        value="{{painDescription}}"
        bindinput="onPainDescriptionChange"
      ></textarea>
    </view>
    
    <button bindtap="saveInfoToCloud" class="save-btn">保存疼痛记录</button>
  </view>

  <!-- 活动度记录 -->
  <view wx:if="{{currentTab === 'range'}}" class="record-container">
    <view class="form-item">
      <text class="label">屈曲角度：</text>
      <input 
        type="number" 
        placeholder="单位：度" 
        value="{{flexionAngle}}"
        bindinput="onFlexionAngleChange"
      />
    </view>
    
    <view class="form-item">
      <text class="label">伸展角度：</text>
      <input 
        type="number" 
        placeholder="单位：度" 
        value="{{extensionAngle}}"
        bindinput="onExtensionAngleChange"
      />
    </view>
    
    <view class="form-item">
      <text class="label">屈曲照片：</text>
      <view class="image-uploader">
        <button bindtap="uploadFlexionPhoto" class="upload-btn">上传照片</button>
        <view wx:if="{{flexionPhotoUrl}}" class="preview-image">
          <image src="{{flexionPhotoUrl}}" mode="widthFix"></image>
          <button bindtap="deleteFlexionPhoto" class="delete-btn">删除</button>
        </view>
      </view>
    </view>
    
    <view class="form-item">
      <text class="label">伸展照片：</text>
      <view class="image-uploader">
        <button bindtap="uploadExtensionPhoto" class="upload-btn">上传照片</button>
        <view wx:if="{{extensionPhotoUrl}}" class="preview-image">
          <image src="{{extensionPhotoUrl}}" mode="widthFix"></image>
          <button bindtap="deleteExtensionPhoto" class="delete-btn">删除</button>
        </view>
      </view>
    </view>
    
    <view class="form-item">
      <text class="label">活动度描述：</text>
      <textarea 
        placeholder="描述活动度的变化、受限情况等" 
        value="{{romDescription}}"
        bindinput="onRomDescriptionChange"
      ></textarea>
    </view>
    
    <button bindtap="saveRomRecord" class="save-btn">保存活动度记录</button>
  </view>

  <!-- 肌力记录 -->
  <view wx:if="{{currentTab === 'muscle'}}" class="record-container">
    <view class="form-item">
  <text class="label">股四头肌：</text>
  <picker 
    value="{{quadricepsStrength}}" 
    range="{{quStrengthquadricepsOptions}}"
    bindchange="onQuadricepsStrengthChange">
    <view class="picker-view">
      {{quStrengthquadricepsOptions[quadricepsStrength]}}
    </view>
  </picker>
</view>
    <view class="form-item">
  <text class="label">腘绳肌肌力：</text>
  <picker 
    value="{{hamstringStrength}}" 
    range="{{strengthOptions}}"
    bindchange="onHamstringStrengthChange">
    <view class="picker-view">
      {{strengthOptions[hamstringStrength]}}
    </view>
  </picker>
</view>
    
<view class="form-item">
  <text class="label">髋外展肌：</text>
  <picker 
    value="{{kuanStrength}}" 
    range="{{kuanOptions}}"
    bindchange="onkuanStrengthChange">
    <view class="picker-view">
      {{kuanOptions[kuanStrength]}}
    </view>
  </picker>
</view>

<view class="form-item">
  <text class="label">健侧对比：</text>
  <picker 
    value="{{jianStrength}}" 
    range="{{jianOptions}}"
    bindchange="onjianStrengthChange">
    <view class="picker-view">
      {{jianOptions[jianStrength]}}
    </view>
  </picker>
</view>

    <view class="form-item">
      <text class="label">训练项目：</text>
      <view class="checkbox-group">
        <label class="checkbox-item">
          <checkbox 
            checked="{{straightLegRaiseChecked}}" 
            bindchange="onTrainingChange" 
            data-value="straightLegRaise"
          />
          <text>直腿抬高</text>
          <input 
            type="text" 
            placeholder="组数x次数" 
            value="{{straightLegRaiseSets}}"
            bindinput="onStraightLegRaiseSetsChange"
            wx:if="{{straightLegRaiseChecked}}"
            class="sets-input"
          />
        </label>
        
        <label class="checkbox-item">
          <checkbox 
            checked="{{squatsChecked}}" 
            bindchange="onTrainingChange" 
            data-value="squats"
          />
          <text>深蹲</text>
          <input 
            type="text" 
            placeholder="组数x次数" 
            value="{{squatsSets}}"
            bindinput="onSquatsSetsChange"
            wx:if="{{squatsChecked}}"
            class="sets-input"
          />
        </label>
        
        <label class="checkbox-item">
          <checkbox 
            checked="{{stepUpsChecked}}" 
            bindchange="onTrainingChange" 
            data-value="stepUps"
          />
          <text>台阶训练</text>
          <input 
            type="text" 
            placeholder="组数x次数" 
            value="{{stepUpsSets}}"
            bindinput="onStepUpsSetsChange"
            wx:if="{{stepUpsChecked}}"
            class="sets-input"
          />
        </label>
        
        <label class="checkbox-item">
          <checkbox 
            checked="{{otherTrainingChecked}}" 
            bindchange="onTrainingChange" 
            data-value="other"
          />
          <text>其他：</text>
          <input 
            type="text" 
            placeholder="训练名称" 
            value="{{otherTrainingName}}"
            bindinput="onOtherTrainingNameChange"
            wx:if="{{otherTrainingChecked}}"
            class="other-input"
          />
          <input 
            type="text" 
            placeholder="组数x次数" 
            value="{{otherTrainingSets}}"
            bindinput="onOtherTrainingSetsChange"
            wx:if="{{otherTrainingChecked}}"
            class="sets-input"
          />
        </label>
      </view>
    </view>
    
    <button bindtap="saveMuscleRecord" class="save-btn">保存肌力记录</button>
  </view>

  <!-- 肿胀记录 -->
  <view wx:if="{{currentTab === 'swelling'}}" class="record-container">
    <view class="form-item">
      <text class="label">患侧：</text>
      <input 
        type="text" 
        placeholder="髌骨上10cm处" 
        value="{{HswellUp}}"
        bindinput="onHuanswellUp"
      />
    </view>
    
    <view class="form-item">
      <text class="label">患侧：</text>
      <input 
        type="text" 
        placeholder="髌骨下5cm处" 
        value="{{HswellDown}}"
        bindinput="onHuanswellDown"
      />
    </view>

    <view class="form-item">
      <text class="label">健侧：</text>
      <input 
        type="text" 
        placeholder="髌骨上10cm处" 
        value="{{JswellUp}}"
        bindinput="onJianswellUp"
      />
    </view>

    <view class="form-item">
      <text class="label">健侧：</text>
      <input 
        type="text" 
        placeholder="髌骨下5cm处" 
        value="{{JswellDown}}"
        bindinput="onJianswellDown"
      />
    </view>

    <view class="form-item">
      <text class="label">肿胀程度：</text>
      <slider 
        min="0" 
        max="10" 
        value="{{swellingLevel}}" 
        bindchange="onSwellingLevelChange" 
        show-value
      />
    </view>
    
    <view class="form-item">
      <text class="label">肿胀描述：</text>
      <textarea 
        placeholder="描述肿胀的特点、变化等" 
        value="{{swellingNotes}}"
        bindinput="onSwellingNotesChange"
      ></textarea>
    </view>
    
    <button bindtap="saveSwellingRecord" class="save-btn">保存肿胀记录</button>
  </view>

  <!-- 功能记录 -->
  <view wx:if="{{currentTab === 'function'}}" class="record-container">
    <view class="form-item">
  <text class="label">行走能力：</text>
  <picker 
    value="{{walkingAbility}}" 
    range="{{walkingOptions}}"
    bindchange="onwalkingChange">
    <view class="picker-view">
      {{walkingOptions[walkingAbility]}}
    </view>
  </picker>
</view>
    
<view class="form-item">
  <text class="label">上下楼梯姿态：</text>
  <picker 
    value="{{stairsAbility}}" 
    range="{{stairsOptions}}"
    bindchange="onstairsChange">
    <view class="picker-view">
      {{stairsOptions[stairsAbility]}}
    </view>
  </picker>
</view>
<view class="form-item">
  <text class="label">上下楼梯感受：</text>
  <picker 
    value="{{feeling}}" 
    range="{{feelingOptions}}"
    bindchange="onfeelingChange">
    <view class="picker-view">
      {{feelingOptions[feeling]}}
    </view>
  </picker>
</view>
    <view class="form-item">
      <text class="label">行走距离：</text>
      <input 
        type="text" 
        placeholder="如：500米" 
        value="{{walkingDistance}}"
        bindinput="onWalkingDistanceChange"
      />
    </view>
    
    <view class="form-item">
      <text class="label">功能描述：</text>
      <textarea 
        placeholder="描述日常活动能力的变化等" 
        value="{{functionNotes}}"
        bindinput="onFunctionNotesChange"
      ></textarea>
    </view>
    
    <button bindtap="saveFunctionRecord" class="save-btn">保存功能记录</button>
  </view>

  <!-- 伤口记录 -->
  <view wx:if="{{currentTab === 'wound'}}" class="record-container">
    <view class="form-item">
      <text class="label">伤口照片：</text>
      <view class="image-uploader">
        <button bindtap="chooseWoundImage" class="upload-btn">上传照片</button>
        <view class="preview-images">
          <view wx:for="{{woundImages}}" wx:key="index" class="preview-item">
            <image src="{{item}}" mode="widthFix"></image>
            <button bindtap="deleteWoundImage" data-index="{{index}}" class="delete-btn">删除</button>
          </view>
        </view>
      </view>
    </view>
    
    <view class="form-item">
  <text class="label">伤口状态：</text>
  <picker 
    value="{{woundCondition}}" 
    range="{{woundOptions}}"
    bindchange="onwoundConditionChange">
    <view class="picker-view">
      {{woundOptions[woundCondition]}}
    </view>
  </picker>
</view>
    
    <view class="form-item">
      <text class="label">伤口描述：</text>
      <textarea 
        placeholder="描述伤口愈合情况、有无渗液等" 
        value="{{woundNotes}}"
        bindinput="onWoundNotesChange"
      ></textarea>
    </view>
    
    <button bindtap="saveWoundRecord" class="save-btn">保存伤口记录</button>
  </view>
</view>
